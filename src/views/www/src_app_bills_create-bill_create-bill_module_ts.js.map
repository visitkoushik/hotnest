{"version":3,"file":"src_app_bills_create-bill_create-bill_module_ts.js","mappings":"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","sources":["./src/app/bills/create-bill/create-bill-routing.module.ts","./src/app/bills/create-bill/create-bill.module.ts","./src/app/bills/create-bill/create-bill.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CreateBillPage } from './create-bill.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CreateBillPage,\n    data: { title: 'New Bill' },\n  },\n  {\n    path: 'newbill',\n    loadChildren: () => import('./newbill/newbill.module').then( m => m.NewbillPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CreateBillPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CreateBillPageRoutingModule } from './create-bill-routing.module';\n\nimport { CreateBillPage } from './create-bill.page';\nimport { MaterialModule } from '../../material.module';\nimport { PipeModule } from '../../pipe/pipe.module';\nimport { AppStorageModule } from '../../app-storage/app-storage.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CreateBillPageRoutingModule,\n    MaterialModule,\n    PipeModule\n  ],\n  declarations: [CreateBillPage]\n\n})\nexport class CreateBillPageModule {}\n","import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Params,\n  Router,\n} from '@angular/router';\nimport { I_CartItem } from 'src/model/cartItem';\nimport { I_Items } from 'src/model/items';\nimport { GENDER, I_CreateBillPage, StoreName } from 'src/model/util';\nimport { CartService } from '../../providers/cart-service.service';\n\nimport { AppStorageService } from '../../app-storage/app-storage.service';\n@Component({\n  selector: 'app-create-bill',\n  templateUrl: './create-bill.page.html',\n  styleUrls: ['./create-bill.page.scss'],\n})\nexport class CreateBillPage implements OnInit {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  CLONED_GENDER = GENDER;\n  creatBillPage: I_CreateBillPage = null;\n  constructor(\n    private cartService: CartService,\n    private activeRoute: ActivatedRoute,\n    private router: Router\n  ) {\n    this.fetchData();\n    this.cartService.setDefaultBill();\n    this.creatBillPage = { ...this.cartService.createBillPageRef };\n\n    this.router.events.subscribe(\n      (event: NavigationStart | NavigationEnd | NavigationError) => {\n        if (event instanceof NavigationStart) {\n          this.fetchData();\n          this.creatBillPage = { ...this.cartService.createBillPageRef };\n        }\n\n        if (event instanceof NavigationEnd) {\n          // Hide loading indicator\n        }\n\n        if (event instanceof NavigationError) {\n          // Hide loading indicator\n\n          // Present error to user\n          console.log(event.error);\n        }\n      }\n    );\n  }\n\n  ngOnInit() {\n    // cartService.mainItems = (itemList as any).default;\n\n    this.activeRoute.queryParams.subscribe((p) => {\n      if (p.data) {\n        this.creatBillPage = JSON.parse(p.data);\n      } else {\n        this.creatBillPage = { ...this.cartService.createBillPageRef };\n      }\n    });\n  }\n  onModifyItem = (id: string, isIncrease: boolean) => {\n    this.creatBillPage.listOfCartItem = this.creatBillPage.listOfCartItem.map(\n      (cartElement: I_CartItem) => {\n        if (cartElement.id !== id) {\n          return cartElement;\n        } else {\n          return {\n            ...cartElement,\n            count: isIncrease ? ++cartElement.count : --cartElement.count,\n          };\n        }\n      }\n    );\n  };\n  onNextScreen = () => {\n    this.cartService.createBillPageRef = { ...this.creatBillPage };\n    const selectedItem = this.creatBillPage.listOfCartItem.filter(\n      (e) => e.count > 0\n    );\n    if (selectedItem) {\n      const query: Params = {\n        data: JSON.stringify({\n          listItem: selectedItem,\n          // customerContact: this.creatBillPage.currentBiill.customerContact,\n          // customerName: this.creatBillPage.currentBiill.customerName,\n          // gender: this.creatBillPage.currentBiill.gender,\n          // due: this.creatBillPage.currentBiill.due,\n          // discount: this.creatBillPage.currentBiill.discount,\n        }),\n      };\n      this.router.navigate(['newbill'], {\n        relativeTo: this.activeRoute,\n        queryParams: query,\n      });\n    }\n  };\n\n  public onReset = () => {};\n\n  trackByFn = (inx: number, item: I_CartItem) => item.id;\n\n  private fetchData = () => {\n    // this.storage\n    //   .getStorage(StoreName.ITEM)\n    //   .then((e) => {\n    //     this.cartService.mainItems = [...e];\n    //     if (!this.cartService.createBillPageRef || !this.cartService.createBillPageRef.currentBiill) {\n    //       this.cartService.setDefaultBill();\n    //     } else {\n    //       this.cartService.updateDefaultBill();\n    //     }\n    //     this.creatBillPage = { ...this.cartService.createBillPageRef };\n    //   })\n    //   .catch((e) => {});\n\n    this.cartService.getAllItem(true, () => {\n      if (\n        !this.cartService.createBillPageRef ||\n        !this.cartService.createBillPageRef.currentBiill\n      ) {\n        this.cartService.setDefaultBill();\n      } else {\n        this.cartService.updateDefaultBill();\n      }\n      this.creatBillPage = { ...this.cartService.createBillPageRef };\n    });\n  };\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}