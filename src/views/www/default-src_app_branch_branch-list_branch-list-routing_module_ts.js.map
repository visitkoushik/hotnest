{"version":3,"file":"default-src_app_branch_branch-list_branch-list-routing_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEH;AAEpD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,6DAAc;QACzB,IAAI,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,SAAS,EAAE,IAAI,EAAE;KAC/C;IACD;QACE,IAAI,EAAE,eAAe;QACrB,YAAY,EAAE,GAAG,EAAE,CACjB,+JAAuD,CAAC,IAAI,CAC1D,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,6BAA6B,CACvC;KACJ;CACF,CAAC;IAMW,2BAA2B,SAA3B,2BAA2B;CAAG;AAA9B,2BAA2B;IAJvC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,2BAA2B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBU;AAOzB;AACoC;AACQ;AACD;AAIvB;IAOhC,cAAc,SAAd,cAAc;IAIzB,YACU,QAAqB,EACrB,WAA2B,EAC3B,QAAyB,EACzB,QAAqB,EACrB,MAAc;QAJd,aAAQ,GAAR,QAAQ,CAAa;QACrB,gBAAW,GAAX,WAAW,CAAgB;QAC3B,aAAQ,GAAR,QAAQ,CAAiB;QACzB,aAAQ,GAAR,QAAQ,CAAa;QACrB,WAAM,GAAN,MAAM,CAAQ;QARxB,gBAAW,GAAe,EAAE,CAAC;QACtB,gBAAW,GAAY,KAAK,CAAC;QAC7B,iBAAY,GAAY,KAAK,CAAC;QA4CrC,cAAS,GAAG,CAAC,GAAG,EAAE,KAAe,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;QASzC,aAAQ,GAAG,GAAG,EAAE;YACtB,IAAI,CAAC,QAAQ;iBACV,WAAW,EAAE;iBACb,IAAI,CAAC,CAAC,CAAa,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBACpD,KAAK,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC,CAAC;QAEF,iBAAY,GAAG,CAAC,MAAgB,EAAE,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACtB,OAAO;aACR;YACD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,QAAQ;iBACV,MAAM,CAAC,qEAAyB,EAAE,MAAM,CAAC,EAAE,CAAC;iBAC5C,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE;gBACV,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;gBAChC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;YAC/C,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;gBACX,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;gBAChC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;YACrD,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAnEA,IAAI,CAAC,WAAW;YACd,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,aAAa,CAAC;gBACxE,CAAC,CAAC,CAAC;QACL,IAAI,CAAC,YAAY;YACf,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,CAC1C,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,cAAc,CAC5B,GAAG,CAAC,CAAC,CAAC;QAET,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAC1B,CAAC,KAAwD,EAAE,EAAE;YAC3D,IACE,KAAK,YAAY,4DAAe;gBAChC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,kBAAkB,CAAC,EACxC;gBACA,8BAA8B;gBAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB;YAED,IAAI,KAAK,YAAY,0DAAa,EAAE;gBAClC,yBAAyB;aAC1B;YAED,IAAI,KAAK,YAAY,4DAAe,EAAE;gBACpC,yBAAyB;gBAEzB,wBAAwB;gBACxB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC1B;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAID,OAAO,CAAC,MAAgB;QACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,eAAe,CAAC,EAAE;YACtC,UAAU,EAAE,IAAI,CAAC,WAAW;YAC5B,WAAW,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;SAC9C,CAAC,CAAC;IACL,CAAC;CAyBF;;YA1FQ,8EAAW;YARlB,2DAAc;YAOP,+EAAe;YADf,uEAAW;YAFlB,mDAAM;;AAeK,cAAc;IAL1B,wDAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;QAC3B,wEAAsC;;KAEvC,CAAC;GACW,cAAc,CA+E1B;AA/E0B","sources":["./src/app/branch/branch-list/branch-list-routing.module.ts","./src/app/branch/branch-list/branch-list.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BranchListPage } from './branch-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BranchListPage,\n    data: { title: 'All Branch', hideLogin: true },\n  },\n  {\n    path: 'update-branch',\n    loadChildren: () =>\n      import('../update-branch/update-branch-routing.module').then(\n        (m) => m.UpdateBranchPageRoutingModule\n      ),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BranchListPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n} from '@angular/router';\nimport { HttpService } from 'src/app/providers/http.service';\nimport { SnackbarService } from 'src/app/providers/snackbar.service';\nimport { UtilService } from 'src/app/providers/utilservice.service';\nimport { AppResponse } from 'src/model/AppResponse';\nimport { I_Branch } from 'src/model/branch';\nimport { I_Employee } from 'src/model/employee';\nimport { ApiEndPoint } from 'src/model/util';\n\n@Component({\n  selector: 'app-branch-list',\n  templateUrl: './branch-list.page.html',\n  styleUrls: ['./branch-list.page.scss'],\n})\nexport class BranchListPage implements OnInit {\n  allBranches: I_Branch[] = [];\n  public BRANCH_READ: boolean = false;\n  public BRANCH_WRITE: boolean = false;\n  constructor(\n    private utilSrvc: UtilService,\n    private activeRoute: ActivatedRoute,\n    private snackBar: SnackbarService,\n    private httpSrvc: HttpService,\n    private router: Router\n  ) {\n    this.BRANCH_READ =\n      this.utilSrvc.metaData.accessRight.findIndex((e) => e === 'BRANCH_READ') >\n      -1;\n    this.BRANCH_WRITE =\n      this.utilSrvc.metaData.accessRight.findIndex(\n        (e) => e === 'BRANCH_WRITE'\n      ) > -1;\n\n    this.router.events.subscribe(\n      (event: NavigationStart | NavigationEnd | NavigationError) => {\n        if (\n          event instanceof NavigationStart &&\n          event.url.startsWith('/branch-tab/list')\n        ) {\n          // this.util.isLoading = true;\n          this.fetchAll();\n        }\n\n        if (event instanceof NavigationEnd) {\n          // Hide loading indicator\n        }\n\n        if (event instanceof NavigationError) {\n          // Hide loading indicator\n\n          // Present error to user\n          console.log(event.error);\n        }\n      }\n    );\n  }\n\n  ngOnInit() {\n    this.fetchAll();\n  }\n\n  trackByFn = (inx, brnch: I_Branch) => brnch.code;\n\n  onClick(branch: I_Branch) {\n    this.router.navigate(['update-branch'], {\n      relativeTo: this.activeRoute,\n      queryParams: { data: JSON.stringify(branch) },\n    });\n  }\n\n  private fetchAll = () => {\n    this.httpSrvc\n      .fetchBranch()\n      .then((e: I_Branch[]) => (this.allBranches = [...e]))\n      .catch((e: string) => this.snackBar.openSnackBar(e));\n  };\n\n  deleteBranch = (branch: I_Branch) => {\n    if (!this.BRANCH_WRITE) {\n      return;\n    }\n    this.utilSrvc.isLoading = true;\n    this.httpSrvc\n      .delete(ApiEndPoint.BRANCH_DELETE, branch.id)\n      .then((e) => {\n        this.utilSrvc.isLoading = false;\n        this.snackBar.openSnackBar('Branch Deleted');\n      })\n      .catch((e) => {\n        this.utilSrvc.isLoading = false;\n        this.snackBar.openSnackBar('Something went wrong');\n      });\n  };\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}