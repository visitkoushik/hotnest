{"version":3,"file":"src_app_items_add-item_add-item_module_ts.js","mappings":"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","sources":["./src/app/items/add-item/add-item-routing.module.ts","./src/app/items/add-item/add-item.module.ts","./src/app/items/add-item/add-item.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AddItemPage } from './add-item.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddItemPage,\n    data: { title: 'Add Item' },\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddItemPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddItemPageRoutingModule } from './add-item-routing.module';\n\nimport { AddItemPage } from './add-item.page';\nimport { MaterialModule } from 'src/app/material.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AddItemPageRoutingModule,\n    MaterialModule\n  ],\n  declarations: [AddItemPage]\n})\nexport class AddItemPageModule {}\n","import {\n  Component,\n  ElementRef,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n} from '@angular/core';\nimport { async } from '@angular/core/testing';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n} from '@angular/router';\nimport { AppStorageService } from 'src/app/app-storage/app-storage.service';\nimport { CartService } from 'src/app/providers/cart-service.service';\nimport { HttpService } from 'src/app/providers/http.service';\nimport { SnackbarService } from 'src/app/providers/snackbar.service';\nimport { UtilService } from 'src/app/providers/utilservice.service';\nimport { AppResponse } from 'src/model/AppResponse';\nimport { I_Category } from 'src/model/category';\nimport { I_Items } from 'src/model/items';\nimport { ApiEndPoint, StoreName } from 'src/model/util';\n\n@Component({\n  selector: 'app-add-item',\n  templateUrl: './add-item.page.html',\n  styleUrls: ['./add-item.page.scss'],\n})\nexport class AddItemPage implements OnInit {\n  public item: I_Items = {} as I_Items;\n  public categoryList: I_Category[] = [] as I_Category[];\n  public ITEM_ADD: boolean = false;\n  public ITEM_UPDATE: boolean = false;\n  public ITEM_READ: boolean = false;\n  public CATEGORY_READ: boolean = false;\n\n  constructor(\n    private storage: AppStorageService,\n    private snackbar: SnackbarService,\n    public cartsrvc: CartService,\n    private utisrvc: UtilService,\n    private activeRoute: ActivatedRoute,\n    private httpClient: HttpService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.ITEM_ADD =\n      this.utisrvc.metaData.accessRight.findIndex((e) => e === 'ITEM_ADD') > -1;\n    this.ITEM_UPDATE =\n      this.utisrvc.metaData.accessRight.findIndex((e) => e === 'ITEM_UPDATE') >\n      -1;\n    this.ITEM_READ =\n      this.utisrvc.metaData.accessRight.findIndex((e) => e === 'ITEM_READ') >\n      -1;\n    this.CATEGORY_READ =\n      this.utisrvc.metaData.accessRight.findIndex(\n        (e) => e === 'CATEGORY_READ'\n      ) > -1;\n    if (this.CATEGORY_READ) {\n      this.getCategory();\n    }\n    if (this.ITEM_ADD) {\n      this.setDefault();\n    }\n\n    this.activeRoute.queryParams.subscribe((p) => {\n      if (this.CATEGORY_READ) {\n        this.getCategory();\n      }\n      if (p && p.data) {\n        this.item = JSON.parse(p.data);\n      } else {\n        this.setDefault();\n      }\n    });\n  }\n  oninputClick = (e) => e.target.select();\n  setDefault = () => {\n    this.item = {\n      category: '-1',\n      id: null,\n      itemName: '',\n      itemPrice: { priceAmount: 0, sellingAmount: 0 },\n      discount: 0,\n      isDiscountInPercentage: false,\n      available: true,\n    } as I_Items;\n  };\n\n  isNotValid = (): boolean =>\n    this.item.itemPrice.priceAmount === 0 ||\n    this.item.itemPrice.sellingAmount === 0 ||\n    this.item?.itemName?.trim().length === 0 ||\n    !this.item.category ||\n    this.item.category === '-1';\n\n  onSave_LoclStore = async () => {\n    let allreadySavedItems: I_Items[] = [] as I_Items[];\n    let newSavedItems: I_Items[] = [] as I_Items[];\n    this.utisrvc.isLoading = true;\n\n    //Get Already Saved Item or blank array\n\n    allreadySavedItems =\n      (await this.storage.getStorage(StoreName.ITEM).catch((e) => {\n        this.utisrvc.isLoading = false;\n        this.snackbar.openSnackBar('Error on Exiting item');\n      })) || [];\n\n    if (\n      allreadySavedItems.findIndex(\n        (e) => this.item.id && e.id === this.item.id\n      ) === -1\n    ) {\n      //Check if the saved Item list has item with the specific id\n      this.item = { ...this.item };\n      newSavedItems = [...allreadySavedItems, this.item];\n    } else {\n      newSavedItems = allreadySavedItems.map((e) =>\n        this.item.id && e.id === this.item.id ? this.item : e\n      );\n    }\n  };\n  onChangeItem = (value) => (this.item.category = value);\n  onSave = async () => {\n    let newSavedItems: I_Items = { ...this.item };\n    if (newSavedItems.id) {\n      this.updateItem();\n    } else {\n      this.addItem();\n    }\n  };\n\n  private addItem = () => {\n    this.utisrvc.isLoading = true;\n    this.httpClient\n      .post(ApiEndPoint.ITEM_ADD, { ...this.item })\n      .then((e: AppResponse<I_Items>) => {\n        const newSavedItems = e.responseObject;\n        this.cartsrvc.mainItems = [...this.cartsrvc.mainItems, newSavedItems];\n        this.snackbar.openSnackBar('Successfuly Saved');\n        this.setDefault();\n        this.utisrvc.isLoading = false;\n      })\n      .catch((e: AppResponse<I_Items>) => {\n        this.snackbar.openSnackBar(e.error);\n        this.setDefault();\n        this.utisrvc.isLoading = false;\n      });\n  };\n  private updateItem = () => {\n    this.utisrvc.isLoading = true;\n    this.httpClient\n      .put(ApiEndPoint.ITEM_UPDATE, this.item.id, {\n        ...this.item,\n        category:\n          typeof this.item.category !== 'string'\n            ? this.item.category.id\n            : this.item.category,\n      })\n      .then((e: AppResponse<I_Items>) => {\n        const newSavedItems = e.responseObject;\n        this.cartsrvc.mainItems = this.cartsrvc.mainItems.map((e: I_Items) =>\n          e.id === newSavedItems.id ? newSavedItems : e\n        );\n        this.snackbar.openSnackBar('Successfuly updated');\n        this.setDefault();\n        this.utisrvc.isLoading = false;\n      })\n      .catch((e: AppResponse<I_Items>) => {\n        this.snackbar.openSnackBar(e.error);\n        this.setDefault();\n        this.utisrvc.isLoading = false;\n      });\n  };\n\n  getCategory(callback?: Function) {\n    this.utisrvc.isLoading = true;\n    this.categoryList =[];\n    this.httpClient\n      .get(ApiEndPoint.CATEGORY_LIST, 'available=true')\n      .then((e: AppResponse<I_Category[]>) => {\n        this.utisrvc.isLoading = false;\n\n        this.categoryList = [...e.responseObject];\n        if (callback) {\n          callback();\n        }\n      })\n      .catch((e: AppResponse<string>) => {\n        this.utisrvc.isLoading = false;\n        this.snackbar.openSnackBar(e.error);\n      });\n  }\n}\n"],"names":["Component","ActivatedRoute","Router","AppStorageService","CartService","HttpService","SnackbarService","UtilService","ApiEndPoint","StoreName","AddItemPage","constructor","storage","snackbar","cartsrvc","utisrvc","activeRoute","httpClient","router","e","target","select","item","category","id","itemName","itemPrice","priceAmount","sellingAmount","discount","isDiscountInPercentage","available","trim","length","allreadySavedItems","newSavedItems","isLoading","getStorage","ITEM","catch","openSnackBar","findIndex","map","value","updateItem","addItem","post","ITEM_ADD","then","responseObject","mainItems","setDefault","error","put","ITEM_UPDATE","ngOnInit","metaData","accessRight","ITEM_READ","CATEGORY_READ","getCategory","queryParams","subscribe","p","data","JSON","parse","callback","categoryList","get","CATEGORY_LIST","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}