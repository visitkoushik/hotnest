{"version":3,"file":"src_app_bills_all-bills_all-bills_module_ts.js","mappings":"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","sources":["./src/app/bills/all-bills/all-bills-routing.module.ts","./src/app/bills/all-bills/all-bills.module.ts","./src/app/bills/all-bills/all-bills.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AllBillsPage } from './all-bills.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AllBillsPage,\n    data: { title: 'All Bills' },\n  },\n  {\n    path: 'existingbill',\n    loadChildren: () => import('./existingbill/existingbill.module').then( m => m.ExistingbillPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AllBillsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AllBillsPageRoutingModule } from './all-bills-routing.module';\n\nimport { AllBillsPage } from './all-bills.page';\nimport { PipeModule } from '../../pipe/pipe.module';\nimport { MaterialModule } from '../../material.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AllBillsPageRoutingModule,\n    PipeModule,\n    MaterialModule\n  ],\n  declarations: [AllBillsPage]\n})\nexport class AllBillsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n} from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { AlertService } from 'src/app/providers/alert.service';\nimport { HttpService } from 'src/app/providers/http.service';\nimport { SnackbarService } from 'src/app/providers/snackbar.service';\nimport { AppResponse } from 'src/model/AppResponse';\nimport { I_Bill } from 'src/model/bill';\nimport { ClassBill } from 'src/model/billClass';\nimport { I_BillingItem, I_BillingReq, I_BillResp } from 'src/model/BillingReq';\nimport { I_CartItem } from 'src/model/cartItem';\nimport { I_Items } from 'src/model/items';\nimport { ApiEndPoint, StoreName } from 'src/model/util';\nimport { AppStorageService } from '../../app-storage/app-storage.service';\nimport { CartService } from '../../providers/cart-service.service';\nimport { UtilService } from '../../providers/utilservice.service';\n\n@Component({\n  selector: 'app-all-bills',\n  templateUrl: './all-bills.page.html',\n  styleUrls: ['./all-bills.page.scss'],\n})\nexport class AllBillsPage implements OnInit {\n  public currentMaxPage = 10;\n  public currentDate: Date = null;\n  public allBills: I_Bill[] = [];\n  public allBillResponse: AppResponse<I_BillResp> = null;\n  public maxDate;\n  BILLING_READ: boolean;\n  BILLING_DELETE: boolean;\n  BILLING_UPDATE: boolean;\n  constructor(\n    private cartService: CartService,\n    private activeRoute: ActivatedRoute,\n    private router: Router,\n    private storage: AppStorageService,\n    private util: UtilService,\n    private alrtCtrl: AlertController,\n    private alertSrvc: AlertService,\n    private snackbar: SnackbarService,\n    private httpServic: HttpService\n  ) {\n    this.currentMaxPage = this.util.maxPageCount;\n    this.currentDate = new Date();\n    this.BILLING_READ =\n      this.util.metaData.accessRight.findIndex((e) => e === 'BILLING_READ') >\n      -1;\n    this.BILLING_DELETE =\n      this.util.metaData.accessRight.findIndex((e) => e === 'BILLING_DELETE') >\n      -1;\n\n    this.BILLING_UPDATE =\n      this.util.metaData.accessRight.findIndex((e) => e === 'BILLING_UPDATE') >\n      -1;\n    this.router.events.subscribe(\n      (event: NavigationStart | NavigationEnd | NavigationError) => {\n        if (event instanceof NavigationStart) {\n          // this.util.isLoading = true;\n          this.currentMaxPage = this.util.maxPageCount;\n          this.setMaxDate();\n          this.fetchBills();\n        }\n\n        if (event instanceof NavigationEnd) {\n          // Hide loading indicator\n        }\n\n        if (event instanceof NavigationError) {\n          // Hide loading indicator\n\n          // Present error to user\n          console.log(event.error);\n        }\n      }\n    );\n  }\n\n  ngOnInit() {\n\n    this.setMaxDate();\n    this.fetchBills();\n  }\n\n  onClickItemBill = (billItem: I_Bill) => {\n    this.router.navigate(['existingbill'], {\n      relativeTo: this.activeRoute,\n      queryParams: { data: JSON.stringify(billItem) },\n    });\n  };\n  fetchBills = async (page?: number) => {\n    this.fetchBillsfromServer(page || 1);\n  };\n  fetchBillsfromStorage = () => {\n    this.storage\n      .getStorage(StoreName.BILL)\n      .then(async (e) => {\n        this.util.isLoading = !true;\n        [...this.cartService.allBiills] = [...e];\n\n        this.allBills = await this.updateBills();\n      })\n      .catch((e) => {\n        this.util.isLoading = !true;\n      });\n  };\n\n  fetchBillsfromServer = async (page: number): Promise<I_Bill[]> => {\n    this.allBills = [];\n    if (this.BILLING_READ) {\n      const dt = this.convertDate(new Date(this.currentDate));\n      const appResp: AppResponse<I_BillResp> = await this.httpServic.get(\n        ApiEndPoint.BILL_LIST,\n        `date=${dt}&paged=true&page=${page || 1}&count=${this.currentMaxPage}`\n      );\n\n      if (appResp.status == 1) {\n        this.allBillResponse = { ...appResp };\n        const iBill: I_Bill[] = this.allBillResponse.responseObject.list.map(\n          (b: I_BillingReq) => {\n            let ibill: I_Bill = {} as I_Bill;\n            ibill.billID = b.id;\n            ibill.billnumber = +b.billNumber;\n            ibill.customerContact = b.customer.mobileNumbers;\n            ibill.customerName =\n              b.customer.firstName +\n              ' ' +\n              b.customer.middleName +\n              ' ' +\n              b.customer.lastName;\n            ibill.gender = b.customer.gender;\n            ibill.discount = b.discount;\n            ibill.paid = b.paid;\n            ibill.due = b.Stotal + b.tax - b.paid;\n            ibill.tax = b.tax;\n            ibill.billDate = b.billingDate;\n            ibill.itemPurchased = b.billingItemList.map((bi: I_BillingItem) => {\n              const b: I_CartItem = {} as I_CartItem;\n              b.id = bi.id;\n              b.count = bi.itemCount;\n              let i: I_Items = {} as I_Items;\n              i.id = bi.itemID;\n              i.itemName = bi.itemName;\n              i.discount = bi.discount;\n              i.isDiscountInPercentage = bi.isDiscountInPercentage;\n              i.itemPrice = {} as {\n                priceAmount: number;\n                sellingAmount: number;\n              };\n              i.itemPrice.priceAmount = bi.priceAmount;\n              i.itemPrice.sellingAmount = bi.sellingAmount;\n\n              b.items = JSON.parse(JSON.stringify(i));\n              return b;\n            });\n            return ibill;\n          }\n        );\n        this.allBills = [...iBill];\n        return iBill;\n      }\n    }\n    this.snackbar.openSnackBar(\n      `You don't have permission to read Billing List`\n    );\n\n    return [] as I_Bill[];\n  };\n\n  updateBills = (): Promise<I_Bill[]> =>\n    new Promise((res) => {\n      const allBills = [...this.cartService.allBiills]?.filter(\n        (itm) =>\n          itm.status &&\n          new Date(itm.billDate).toLocaleDateString() ===\n            new Date(this.currentDate).toLocaleDateString()\n      );\n      res(allBills || []);\n    });\n\n  onChangeDate = async () => {\n    // this.allBills = await this.updateBills();\n    await this.fetchBills();\n  };\n\n  trackByFn = (inx, item: I_Bill) => item.billID;\n\n  onPayDue = (e, bill: I_Bill) => {\n    e.stopPropagation();\n    this.presentAlert(bill);\n  };\n\n  onDelete = (e, bill: I_Bill) => {\n    e.stopPropagation();\n    this.alertSrvc.presentAlert(\n      this.alrtCtrl,\n      'Confirm Delete',\n      'Are you sure, you want to delete the bill? ',\n      { ok: 'Yes', cancel: 'No' },\n      async () => {\n        // eslint-disable-next-line no-underscore-dangle\n        this.deleteFromServer(bill);\n      },\n      () => {}\n    );\n  };\n\n  deleteFromStorage = async (bill: I_Bill) => {\n    this.cartService.allBiills = this.cartService.allBiills.map((b: I_Bill) =>\n      b.billID === bill.billID ? { ...b, status: false } : b\n    );\n\n    await this.storage.setStorage(StoreName.BILL, [\n      ...this.cartService.allBiills,\n    ]);\n    this.allBills = await this.updateBills();\n  };\n  deleteFromServer = async (bill: I_Bill) => {\n    this.util.isLoading = true;\n    this.httpServic\n      .delete(ApiEndPoint.BILL_DELETE, bill.billID)\n      .then((e: AppResponse<string>) => {\n        this.snackbar.openSnackBar(e.responseObject);\n        this.fetchBills()\n          .then((e) => {\n            this.util.isLoading = false;\n          })\n          .catch((e) => {\n            this.util.isLoading = false;\n          });\n      })\n      .catch((e: any) => {\n        this.snackbar.openSnackBar(e.error);\n        this.util.isLoading = false;\n      });\n  };\n\n  setMaxDate = () => {\n    this.maxDate = new Date();\n  };\n\n  yesHandler = async (bill: I_Bill, dueInput: string) => {\n    this.payDueServer(bill, dueInput);\n  };\n  payDueServer = (bill: I_Bill, dueInput: string) => {\n    this.util.isLoading = true;\n    this.httpServic\n      .put(ApiEndPoint.BILL_UPDATE_PAYDUE, bill.billID, {\n        paid: dueInput,\n      })\n      .then((e: AppResponse<string>) => {\n        this.snackbar.openSnackBar(e.responseObject);\n        this.fetchBills()\n          .then((e) => {\n            this.util.isLoading = false;\n          })\n          .catch((e) => {\n            this.util.isLoading = false;\n          });\n      })\n      .catch((e: AppResponse<string>) => {\n        this.snackbar.openSnackBar(e.error);\n        this.util.isLoading = false;\n      });\n  };\n\n  payDueStorage = async (bill: I_Bill, dueInput: string) => {\n    if (!dueInput || +dueInput <= 0 || bill.due < +dueInput) {\n      if (!dueInput || +dueInput >= bill.due) {\n        this.snackbar.openSnackBar(\n          'Input amount cannot be greater than due amount'\n        );\n      } else {\n        this.snackbar.openSnackBar('Enter amount atleast 1 Rs.');\n      }\n\n      return false;\n    }\n    this.allBills = this.allBills.map((e) =>\n      e.billID === bill.billID\n        ? { ...e, due: e.total - e.paid - +dueInput, paid: e.paid + +dueInput }\n        : e\n    );\n\n    this.cartService.allBiills = [...this.allBills];\n    await this.storage\n      .setStorage(StoreName.BILL, [...this.cartService.allBiills])\n      .catch((err) => this.snackbar.openSnackBar('Error update data'));\n  };\n\n  noHandler = () => {};\n\n  async presentAlert(bill: I_Bill) {\n    const alert = await this.alrtCtrl.create({\n      header: 'Please enter amount',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n\n          handler: () => this.noHandler(),\n        },\n        {\n          text: 'OK',\n\n          handler: (data) => this.yesHandler(bill, data.dueInput),\n        },\n      ],\n      inputs: [\n        {\n          name: 'dueInput',\n          type: 'number',\n          placeholder: 'Due amount',\n          min: 1,\n          max: bill.due,\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n\n  convertDate = (dt: Date): string => {\n    // 2023-01-04T\n\n    return `${dt.getFullYear()}-${(dt.getMonth() + 1)\n      .toString()\n      .padStart(2, '0')}-${dt\n      .getDate()\n      .toString()\n      .padStart(2, '0')}T00:00:00.000Z`;\n  };\n  handlePageEvent = (ev:PageEvent) => {\n    console.log(ev);\n    this.fetchBills(ev.pageIndex+1);\n  };\n}\n"],"names":["Component","ActivatedRoute","NavigationEnd","NavigationError","NavigationStart","Router","AlertController","AlertService","HttpService","SnackbarService","ApiEndPoint","StoreName","AppStorageService","CartService","UtilService","AllBillsPage","constructor","cartService","activeRoute","router","storage","util","alrtCtrl","alertSrvc","snackbar","httpServic","billItem","navigate","relativeTo","queryParams","data","JSON","stringify","page","fetchBillsfromServer","getStorage","BILL","then","e","isLoading","allBiills","allBills","updateBills","catch","BILLING_READ","dt","convertDate","Date","currentDate","appResp","get","BILL_LIST","currentMaxPage","status","allBillResponse","iBill","responseObject","list","map","b","ibill","billID","id","billnumber","billNumber","customerContact","customer","mobileNumbers","customerName","firstName","middleName","lastName","gender","discount","paid","due","Stotal","tax","billDate","billingDate","itemPurchased","billingItemList","bi","count","itemCount","i","itemID","itemName","isDiscountInPercentage","itemPrice","priceAmount","sellingAmount","items","parse","openSnackBar","Promise","res","filter","itm","toLocaleDateString","fetchBills","inx","item","bill","stopPropagation","presentAlert","ok","cancel","deleteFromServer","setStorage","delete","BILL_DELETE","error","maxDate","dueInput","payDueServer","put","BILL_UPDATE_PAYDUE","total","err","getFullYear","getMonth","toString","padStart","getDate","ev","console","log","pageIndex","maxPageCount","metaData","accessRight","findIndex","BILLING_DELETE","BILLING_UPDATE","events","subscribe","event","setMaxDate","ngOnInit","alert","create","header","buttons","text","role","handler","noHandler","yesHandler","inputs","name","type","placeholder","min","max","present","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}