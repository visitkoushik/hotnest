{"version":3,"file":"src_app_items_add-category_add-category_module_ts.js","mappings":"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","sources":["./src/app/items/add-category/add-category-routing.module.ts","./src/app/items/add-category/add-category.module.ts","./src/app/items/add-category/add-category.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AddCategoryPage } from './add-category.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddCategoryPage,\n    data: { title: 'Category' },\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddCategoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddCategoryPageRoutingModule } from './add-category-routing.module';\n\nimport { AddCategoryPage } from './add-category.page';\nimport { MaterialModule } from 'src/app/material.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AddCategoryPageRoutingModule,\n    MaterialModule\n  ],\n  declarations: [AddCategoryPage]\n})\nexport class AddCategoryPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n} from '@angular/router';\nimport { AppStorageService } from 'src/app/app-storage/app-storage.service';\nimport { CartService } from 'src/app/providers/cart-service.service';\nimport { HttpService } from 'src/app/providers/http.service';\nimport { SnackbarService } from 'src/app/providers/snackbar.service';\nimport { UtilService } from 'src/app/providers/utilservice.service';\nimport { AppResponse } from 'src/model/AppResponse';\nimport { I_Category } from 'src/model/category';\nimport { ApiEndPoint, StoreName } from 'src/model/util';\n\n@Component({\n  selector: 'app-add-category',\n  templateUrl: './add-category.page.html',\n  styleUrls: ['./add-category.page.scss'],\n})\nexport class AddCategoryPage implements OnInit {\n  public item: I_Category = {\n    categoryName: '',\n    id: null,\n    categoryDiscount: 0,\n    discountInPercent: false,\n    available: false,\n  } as I_Category;\n  CATEGORY_ADD: boolean = false;\n  CATEGORY_READ: boolean = false;\n  public categoryList: I_Category[] = [];\n  constructor(\n    public cartServc: CartService,\n    private store: AppStorageService,\n    private util: UtilService,\n    private httpService: HttpService,\n    private snackbar: SnackbarService,\n    private router: Router\n  ) {\n    this.router.events.subscribe(\n      (event: NavigationStart | NavigationEnd | NavigationError) => {\n        if (\n          event instanceof NavigationStart &&\n          event.url.startsWith('/tab-item/add-category')\n        ) {\n          this.getCategory();\n        }\n\n        if (event instanceof NavigationEnd) {\n          // Hide loading indicator\n        }\n\n        if (event instanceof NavigationError) {\n          // Hide loading indicator\n\n          // Present error to user\n          console.log(event.error);\n        }\n      }\n    );\n  }\n\n  async ngOnInit() {\n    // this.cartServc.categoryList =\n    //   (await this.store.getStorage('category').catch((e) => {})) ||\n    //   ([] as I_Category[]);\n    this.CATEGORY_ADD =\n      this.util.metaData.accessRight.findIndex((e) => e === 'CATEGORY_ADD') >\n      -1;\n    this.CATEGORY_READ =\n      this.util.metaData.accessRight.findIndex((e) => e === 'CATEGORY_READ') >\n      -1;\n\n    if (this.CATEGORY_READ) {\n      this.getCategory();\n    }\n  }\n  getCategory() {\n    this.util.isLoading = true;\n    this.httpService\n      .get(ApiEndPoint.CATEGORY_LIST, 'available=true')\n      .then((e: AppResponse<I_Category[]>) => {\n        this.categoryList = [...e.responseObject];\n        this.util.isLoading = false;\n      })\n      .catch((e: AppResponse<string>) => {\n        this.util.isLoading = false;\n        this.snackbar.openSnackBar(e.error);\n      });\n  }\n  isNotValid = (): boolean => this.item.categoryName?.trim().length === 0;\n  // onSave_backup = async () => {\n  //   this.util.isLoading = true;\n  //   if (!this.item.id) {\n  //     this.item.id = Date.now() + '';\n  //     this.cartServc.categoryList.push({ ...this.item });\n  //   } else {\n  //     this.cartServc.categoryList = this.cartServc.categoryList.map((e) =>\n  //       e.id === this.item.id ? { ...this.item } : e\n  //     );\n  //   }\n\n  //   const i = {\n  //     categoryDiscount: 0,\n  //     discountInPercent: false,\n  //     available: false,\n  //   };\n  //   this.item = { ...i } as I_Category;\n\n  //   await this.store.setStorage(StoreName.CATEGORY, [\n  //     ...this.cartServc.categoryList,\n  //   ]);\n\n  //   this.util.isLoading = false;\n  // };\n\n  onSave = () => {\n    if (this.item.id) {\n      this.updateCategory();\n    } else {\n      this.addCategory();\n    }\n  };\n\n  private addCategory = () => {\n    this.util.isLoading = true;\n    this.httpService\n      .post(ApiEndPoint.CATEGORY_ADD, { ...this.item })\n      .then((e: AppResponse<I_Category>) => {\n        this.util.isLoading = false;\n        this.snackbar.openSnackBar('Successfuly Saved');\n        this.getCategory();\n      })\n      .catch((e: AppResponse<I_Category>) => {\n        this.snackbar.openSnackBar(e.error);\n        this.util.isLoading = false;\n      });\n  };\n\n  private updateCategory = () => {\n    this.util.isLoading = true;\n    this.httpService\n      .put(ApiEndPoint.CATEGORY_UPDATE, this.item.id, { ...this.item })\n      .then((e: AppResponse<I_Category>) => {\n        this.util.isLoading = false;\n        this.snackbar.openSnackBar('Successfuly Updated');\n        this.getCategory();\n      })\n      .catch((e: AppResponse<I_Category>) => {\n        this.snackbar.openSnackBar(e.error);\n        this.util.isLoading = false;\n      });\n  };\n\n  oninputClick = (e) => e.target.select();\n  trackByFunction = (c: I_Category) => c.id;\n  onClickCategoryItem = (i: I_Category) => {\n    this.item = { ...i };\n  };\n}\n"],"names":["Component","NavigationEnd","NavigationError","NavigationStart","Router","AppStorageService","CartService","HttpService","SnackbarService","UtilService","ApiEndPoint","AddCategoryPage","constructor","cartServc","store","util","httpService","snackbar","router","categoryName","id","categoryDiscount","discountInPercent","available","item","trim","length","updateCategory","addCategory","isLoading","post","CATEGORY_ADD","then","e","openSnackBar","getCategory","catch","error","put","CATEGORY_UPDATE","target","select","c","i","events","subscribe","event","url","startsWith","console","log","ngOnInit","metaData","accessRight","findIndex","CATEGORY_READ","get","CATEGORY_LIST","categoryList","responseObject","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}