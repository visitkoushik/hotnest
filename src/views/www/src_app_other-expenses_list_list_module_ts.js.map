{"version":3,"file":"src_app_other-expenses_list_list_module_ts.js","mappings":"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","sources":["./src/app/other-expenses/list/list-routing.module.ts","./src/app/other-expenses/list/list.module.ts","./src/app/other-expenses/list/list.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage,\n    data: { title: 'All tansactions' },\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPageRoutingModule } from './list-routing.module';\n\nimport { ListPage } from './list.page';\nimport { MaterialModule } from 'src/app/material.module';\nimport { BranchSelectorModule } from 'src/app/branch-selector/branch-selector.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MaterialModule,\n    BranchSelectorModule,\n    ListPageRoutingModule,\n  ],\n  declarations: [ListPage],\n})\nexport class ListPageModule {}\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { MatMenuTrigger } from '@angular/material/menu';\nimport { PageEvent } from '@angular/material/paginator';\nimport {\n  ActivatedRoute,\n  NavigationEnd,\n  NavigationError,\n  NavigationStart,\n  Router,\n} from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { AlertService } from 'src/app/providers/alert.service';\nimport { HttpService } from 'src/app/providers/http.service';\nimport { SnackbarService } from 'src/app/providers/snackbar.service';\nimport { UtilService } from 'src/app/providers/utilservice.service';\nimport { AppResponse } from 'src/model/AppResponse';\nimport { I_Transaction } from 'src/model/Transaction';\nimport { ApiEndPoint } from 'src/model/util';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.page.html',\n  styleUrls: ['./list.page.scss'],\n})\nexport class ListPage implements OnInit {\n  @ViewChild(MatMenuTrigger) trigger: MatMenuTrigger;\n  public currentDate: Date;\n  maxDate: Date;\n  transactionList: I_Transaction[] = [];\n  public currentMaxPage = 10;\n\n  pageIndex: number = 0;\n  totalDr = 0;\n  totalCr = 0;\n  public displayedColumns = ['perticulars', 'amountCr', 'amountDr'];\n\n  constructor(\n    public util: UtilService,\n    private httpSrvc: HttpService,\n    private snacBar: SnackbarService,\n    private router: Router,\n    private activatedRoute: ActivatedRoute,\n    private alrtCtrl: AlertController,\n    private alrtSrvc: AlertService\n  ) {\n    this.router.events.subscribe(\n      (event: NavigationStart | NavigationEnd | NavigationError) => {\n        if (\n          event instanceof NavigationStart &&\n          event.url.startsWith('/other-expenses/list')\n        ) {\n          // this.util.isLoading = true;\n          this.currentMaxPage = this.util.maxPageCount;\n          this.setMaxDate();\n          this.fetchTransaction();\n        }\n\n        if (event instanceof NavigationEnd) {\n          // Hide loading indicator\n        }\n\n        if (event instanceof NavigationError) {\n          // Hide loading indicator\n\n          // Present error to user\n          console.log(event.error);\n        }\n      }\n    );\n  }\n\n  ngOnInit() {\n    this.currentMaxPage = this.util.maxPageCountReport;\n    this.currentDate = new Date();\n    this.setMaxDate();\n    this.fetchTransaction();\n  }\n\n  onChangeDate() {\n    this.fetchTransaction();\n  }\n  onBranchChanged() {\n    this.fetchTransaction();\n  }\n\n  setMaxDate = () => {\n    this.maxDate = new Date();\n  };\n\n  fetchTransaction = (page: number = 1) => {\n    const dt = this.convertDate(new Date(this.currentDate));\n    this.util.isLoading = true;\n    this.httpSrvc\n      .get(\n        ApiEndPoint.TRANSACTION_READ,\n        `date=${dt}&paged=true&page=${page || 1}&count=${\n          this.currentMaxPage\n        }&branchCode=${this.util.branchCode}`\n      )\n      .then(\n        (\n          e: AppResponse<{\n            list: I_Transaction[];\n            totalCr: number;\n            totalDr: number;\n          }>\n        ) => {\n          this.util.isLoading = false;\n          this.transactionList = [...e.responseObject.list];\n          this.totalCr = e.responseObject.totalCr;\n          this.totalDr = e.responseObject.totalDr;\n        }\n      )\n      .catch((e) => {\n        this.util.isLoading = false;\n        this.snacBar.openSnackBar(e.error);\n      });\n  };\n\n  convertDate = (dt: Date): string => {\n    // 2023-01-04T\n\n    return `${dt.getFullYear()}-${(dt.getMonth() + 1)\n      .toString()\n      .padStart(2, '0')}-${dt\n      .getDate()\n      .toString()\n      .padStart(2, '0')}T00:00:00.000Z`;\n  };\n  handlePageEvent = (ev: PageEvent) => {\n    this.pageIndex = ev.pageIndex + 1;\n    this.fetchTransaction(this.pageIndex);\n  };\n\n  onTapRowUpdate = (e) => {\n    // this.trigger.openMenu();\n    console.log('READY to Update', e);\n    this.router.navigate(['/other-expenses/update'], {\n      relativeTo: this.activatedRoute,\n      queryParams: { ...e },\n    });\n  };\n  deleteItem = (trns: I_Transaction) => {\n    this.util.isLoading=true;\n    this.httpSrvc.delete(ApiEndPoint.TRANSACTION_DELETE,trns.id)\n    .then(e=>this.snacBar.openSnackBar('Transaction deleted'))\n    .catch(e=>this.snacBar.openSnackBar('Something Went wrong'))\n\n  };\n  onTapRowDelete = (e) => {\n    this.alrtSrvc.presentAlert(\n      this.alrtCtrl,\n      'Delete Transaction',\n      'Are you sure to delete the transaction?',\n      { ok: 'Yes', cancel: 'No' },\n      () => {\n        this.alrtSrvc.presentAlert(\n          this.alrtCtrl,\n          'Delete Transaction',\n          'You can not revert this Operation once you delete. Still want to continue',\n          { ok: 'Yes', cancel: 'No' },\n          () => {\n            this.deleteItem(e);\n          }\n        );\n      }\n    );\n    console.log('READY to Delete', e);\n  };\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}